
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>QQ简易聊天框</title>
    <link rel="stylesheet" href="chat.css">
    <style type="text/css">
    .back{background-color: gray;border-radius: 5px 5px;}
        .float{display:inline;}
    </style>
</head>
<body>
<section id="chat">
    <div class="chatBody"></div>
    <div><img src="images/icon.jpg"></div>
    <textarea class="chatText"></textarea>
    <div class="btn"><span>关闭(C)</span><span id="send">发送(S)</span></div>
</section>
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    var arrayImg=["images/head01.jpg","images/head02.jpg","images/head03.jpg"];
    var arrayName=["葬爱小明","非主流刘澳","唯你沉沦"];
    $(function () {
        $("#send").click(function () {
            var lth=$(".chatText").val().trim().length;
            if(lth>0){
                var iNum=Math.floor(Math.random()*3);
                var img=arrayImg[iNum];
                var name=arrayName[iNum];
                var headStr="<div style='display: inline-block'><img src="+img+"></div>";//设置头像
                var userName="<p style='display: inline-block;position: relative;top: -13px;;'>"+name+"</p>";//设置昵称
                var chatStr="<div class=\"s1\" style='width: 400px;position: relative;left: 35px;top:-13px;'>"+$(".chatText").val()+"</div>";//获取并设置当前输入的内容
                var currentStr="<section>"+headStr+userName+chatStr+"</section>";
                var str=$(".chatBody").html();//获取当前聊天内容
                $(".chatBody").html(str+currentStr);
                $(".s1").addClass("back");
                $(".chatText").val("");//清空当前聊天框内容
            }
        });

    });
    $(document).keydown(function (event) {
        if(event.keyCode=="13"){
            var lth=$(".chatText").val().trim().length;
            if(lth>0){
                var iNum=Math.floor(Math.random()*3);
                var img=arrayImg[iNum];
                var name=arrayName[iNum];
                var headStr="<div style='display: inline-block'><img src="+img+"></div>";//设置头像
                var userName="<p style='display: inline-block;position: relative;top: -13px;;'>"+name+"</p>";//设置昵称
                var chatStr="<div class=\"s1\" style='width: 400px;position: relative;left: 35px;top:-13px;'>"+$(".chatText").val()+"</div>";//获取并设置当前输入的内容
                var currentStr="<section>"+headStr+userName+chatStr+"</section>";
                var str=$(".chatBody").html();//获取当前聊天内容
                $(".chatBody").html(str+currentStr);
                $(".s1").addClass("back");
                $(".chatText").val("");//清空当前聊天框内容
            }
        }
    });
</script>
</body>
</html>